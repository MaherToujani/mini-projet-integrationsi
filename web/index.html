<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Restaurants</title>
</head>
<body>
  <h1>Restaurants</h1>
  <div id="out">Loading...</div>

  <script>
  const url = window.location.origin + '/restaurants.json?v=' + Date.now(); // cache-bust
  document.getElementById('out').textContent = 'Loading ' + url + ' ...';

  fetch(url, { cache: 'no-store' })
    .then(r => {
      if (!r.ok) throw new Error('HTTP ' + r.status);
      return r.json();
    })
    .then(data => {
      const first = data.slice(0, 50);
      let html = '<ul>';
      first.forEach(x => {
        html += `<li>${x.name || 'No name'} - ${x.cuisine || 'Unknown cuisine'}</li>`;
      });
      html += '</ul>';
      document.getElementById('out').innerHTML = html;
    })
    .catch(err => {
      document.getElementById('out').textContent =
        'Fetch failed: ' + err + ' (open DevTools Console/Network)';
      console.error('Fetch failed', err);
    });
</script>

</body>
</html>
